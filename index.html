<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>ì‹œì¦ˆì˜¤ì¹´ & ë„ì¿„ (Final V37)</title>
<style>
    /* --- 1. ê¸°ë³¸ ì„¤ì • (Reset) --- */
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f3f4f6; color: #1f2937; height: 100dvh; display: flex; justify-content: center; overflow: hidden; }
    
    /* --- 2. ë ˆì´ì•„ì›ƒ --- */
    .app-container { width: 100%; max-width: 480px; height: 100%; background-color: #f9fafb; display: flex; flex-direction: column; position: relative; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
    
    /* --- 3. í—¤ë” ìŠ¤íƒ€ì¼ --- */
    header { padding: 1.5rem; padding-bottom: 1.2rem; border-bottom-left-radius: 1.5rem; border-bottom-right-radius: 1.5rem; color: white; flex-shrink: 0; transition: all 0.3s ease; z-index: 30; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
    header.shrink { padding-top: 0.75rem; padding-bottom: 1rem; padding-left: 1rem; padding-right: 1rem; border-radius: 0 0 1rem 1rem; }
    
    .bg-gradient-main { background: linear-gradient(to right, #3b82f6, #06b6d4); }
    .text-main { color: #0284c7; }
    
    .lang-btn { position: absolute; top: 1.5rem; right: 1.5rem; background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.4rem 0.8rem; border-radius: 9999px; font-size: 0.75rem; font-weight: bold; cursor: pointer; backdrop-filter: blur(4px); display: flex; align-items: center; gap: 4px; transition: all 0.3s ease; }
    header.shrink .lang-btn { top: 0.75rem; right: 1rem; padding: 0.2rem 0.6rem; font-size: 0.7rem; }

    .title { font-size: 1.5rem; font-weight: 800; margin-top: 0.5rem; margin-bottom: 0.5rem; transition: all 0.3s ease; transform-origin: left top; }
    header.shrink .title { font-size: 1.1rem; margin-top: 0; margin-bottom: 0.5rem; }
    
    /* --- 4. ë©”ì¸ ì»¨í…ì¸  --- */
    main { flex: 1; overflow-y: auto; padding: 1rem; padding-top: 1.5rem; padding-bottom: 6rem; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }
    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* íŒ ë°•ìŠ¤ */
    .tip-box { background: white; padding: 1rem; border-radius: 1rem; border: 1px solid #e5e7eb; margin-bottom: 1rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); animation: fadeIn 0.5s ease-out; }
    .tip-title { font-size: 0.75rem; font-weight: 800; color: #9ca3af; text-transform: uppercase; margin-bottom: 0.5rem; letter-spacing: 0.05em; }
    .tip-item { font-size: 0.875rem; color: #4b5563; margin-bottom: 0.25rem; display: flex; gap: 0.5rem; }

    /* ì¹´ë“œ ê³µí†µ */
    .card { background: white; border-radius: 1rem; padding: 1.25rem; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); animation: fadeIn 0.3s ease-out; margin-bottom: 1rem; }
    .card-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid #f3f4f6; }
    .card-title { font-size: 1.1rem; font-weight: 800; color: #1f2937; margin-bottom: 0.5rem; }
    
    /* ì¼ì • ê´€ë ¨ */
    .day-tabs { display: flex; gap: 0.5rem; overflow-x: auto; padding-bottom: 0.5rem; margin-bottom: 1rem; }
    .day-btn { flex-shrink: 0; padding: 0.5rem 1rem; border-radius: 9999px; font-size: 0.875rem; font-weight: bold; border: none; cursor: pointer; transition: all 0.2s; white-space: nowrap; }
    .day-btn.active { background-color: #3b82f6; color: white; }
    .day-btn.inactive { background-color: white; color: #4b5563; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }
    
    .date-text { font-size: 0.875rem; font-weight: bold; display: block; margin-bottom: 0.25rem; }

    .event-item { display: flex; gap: 1rem; margin-bottom: 1.5rem; position: relative; }
    .event-item::before { content: ''; position: absolute; left: 19px; top: 2rem; bottom: -1.5rem; width: 2px; background-color: #f3f4f6; z-index: 0; }
    .event-item:last-child::before { display: none; }
    .icon-box { width: 40px; height: 40px; flex-shrink: 0; background-color: #f3f4f6; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; z-index: 1; position: relative; }

    /* ì•„ì´ì½˜ ìƒ‰ìƒ */
    .icon-fly { background-color: #dbeafe; color: #2563eb; }
    .icon-car { background-color: #e0e7ff; color: #4f46e5; }
    .icon-food { background-color: #ffedd5; color: #ea580c; }
    .icon-camera { background-color: #fce7f3; color: #db2777; }
    .icon-bed { background-color: #f3e8ff; color: #9333ea; }
    .icon-shop { background-color: #fef3c7; color: #d97706; }
    .icon-map { background-color: #fee2e2; color: #dc2626; }
    .icon-flower { background-color: #fdf2f8; color: #db2777; }
    .icon-train { background-color: #ccfbf1; color: #0d9488; }
    .icon-beer { background-color: #fef9c3; color: #ca8a04; }
    .icon-park { background-color: #ecfccb; color: #65a30d; }
    .icon-water { background-color: #cffafe; color: #0891b2; }
    .icon-home { background-color: #d1fae5; color: #059669; }
    .icon-free { background-color: #f3f4f6; color: #6b7280; border: 2px dashed #d1d5db; }
    
    .event-content { flex: 1; padding-top: 0.25rem; }
    .time-badge { font-size: 0.75rem; font-weight: bold; color: #6b7280; background: #f3f4f6; padding: 2px 6px; border-radius: 4px; display: inline-block; margin-bottom: 4px;}
    .event-title { font-size: 1rem; font-weight: bold; color: #1f2937; margin-bottom: 0.25rem; }
    .event-desc { font-size: 0.875rem; color: #6b7280; line-height: 1.4; white-space: pre-wrap; }
    .trans-info { font-size: 0.8rem; color: #059669; font-weight: 600; background: #ecfdf5; padding: 2px 6px; border-radius: 4px; display: inline-block; margin-top: 4px; }
    
    .badge { display: inline-flex; align-items: center; gap: 4px; font-size: 0.75rem; font-weight: 600; padding: 4px 8px; border-radius: 6px; margin-top: 0.5rem; margin-right: 4px; }
    .badge-park { background: #f3f4f6; color: #4b5563; }
    .badge-warn { background: #fef2f2; color: #dc2626; border: 1px solid #fee2e2; }
    .badge-flower { background: #fdf2f8; color: #db2777; border: 1px solid #fce7f3; }
    .badge-time { background: #eff6ff; color: #1d4ed8; border: 1px solid #dbeafe; }
    
    .btn-map { font-size: 0.75rem; font-weight: 600; padding: 2px 8px; border-radius: 4px; cursor: pointer; margin-left: auto; float: right; transition: background 0.2s; }
    .btn-map-main { color: #0284c7; background: #e0f2fe; }

    /* ì²´í¬ë¦¬ìŠ¤íŠ¸ & ì •ë³´ íƒ­ */
    .check-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border: 1px solid #f3f4f6; border-radius: 0.5rem; margin-bottom: 0.5rem; cursor: pointer; transition: all 0.2s; background: white; }
    .check-box { width: 1.25rem; height: 1.25rem; border-radius: 0.25rem; border: 2px solid #d1d5db; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; transition: all 0.2s; }
    .check-item.checked { background-color: #f9fafb; border-color: #e5e7eb; }
    .check-item.checked span { color: #9ca3af; text-decoration: line-through; }
    .check-item.checked .check-box { background-color: #3b82f6; border-color: #3b82f6; }

    /* ì •ë³´ íƒ­ ìŠ¤íƒ€ì¼ */
    .info-item { display: flex; align-items: center; justify-content: space-between; padding: 1rem; border-bottom: 1px solid #f3f4f6; cursor: pointer; text-decoration: none; color: inherit; transition: background 0.2s; }
    .info-item:last-child { border-bottom: none; }
    .info-item:active { background-color: #f9fafb; }
    .info-label { font-size: 0.95rem; font-weight: 600; color: #374151; display: flex; align-items: center; gap: 0.75rem; }
    .info-val { font-size: 0.875rem; color: #6b7280; }
    .call-btn { background: #fee2e2; color: #dc2626; padding: 4px 10px; border-radius: 999px; font-size: 0.75rem; font-weight: bold; }
    .link-btn { background: #e0e7ff; color: #4f46e5; padding: 4px 10px; border-radius: 999px; font-size: 0.75rem; font-weight: bold; }

    /* --- 5. í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ --- */
    nav { background: white; border-top: 1px solid #e5e7eb; padding: 0.75rem 1.5rem; display: flex; justify-content: space-between; z-index: 20; padding-bottom: calc(1.5rem + env(safe-area-inset-bottom)); }
    .nav-btn { display: flex; flex-direction: column; align-items: center; gap: 2px; background: none; border: none; cursor: pointer; color: #9ca3af; font-size: 0.75rem; font-weight: 600; width: 33%; }
    .nav-btn.active { color: #3b82f6; }
    .nav-icon { width: 24px; height: 24px; margin-bottom: 2px; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    .nav-controls { display: flex; justify-content: space-between; align-items: center; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px dashed #e5e7eb; }
    .nav-control-btn { font-size: 0.875rem; font-weight: bold; color: #6b7280; background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 4px; }
    .btn-top { background: #f3f4f6; padding: 8px; border-radius: 50%; }

</style>
</head>
<body>

<div class="app-container">
    <header id="main-header" class="bg-gradient-main">
        <button onclick="toggleLang()" class="lang-btn">ğŸŒ <span id="lang-text">æ—¥æœ¬èª</span></button>
        <div id="app-title" class="title">ì‹œì¦ˆì˜¤ì¹´ & ë„ì¿„ (Final)</div>
    </header>

    <main id="main-scroll">
        <div id="tip-container" class="tip-box">
            <h3 class="tip-title">ğŸš— ì—¬í–‰ í¬ì¸íŠ¸</h3>
            <ul id="tip-list"></ul>
        </div>
        <div id="content-area"></div>
    </main>

    <nav>
        <button onclick="setTab('itinerary')" id="nav-btn-sch" class="nav-btn active">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
            <span class="txt-sch">ì¼ì •</span>
        </button>
        <button onclick="setTab('check')" id="nav-btn-chk" class="nav-btn">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>
            <span class="txt-chk">ì²´í¬</span>
        </button>
        <button onclick="setTab('info')" id="nav-btn-info" class="nav-btn">
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
            <span class="txt-info">ì •ë³´</span>
        </button>
    </nav>

</div>

<script>
    var appState = { 
        tab: 'itinerary', 
        day: 1, 
        lang: 'ko', 
        checks: {} 
    };
    var itineraryScrollPos = 0;

    // --- ë°ì´í„° ---
    var LOCALE_DATA = {
        ko: {
            title: "ì‹œì¦ˆì˜¤ì¹´ & ë„ì¿„ (6ì¼)", sch: "ì¼ì •", chk: "ì²´í¬", info: "ì •ë³´",
            tips: ["ì‹œì¦ˆì˜¤ì¹´(1-2ì¼ì°¨): ë ŒíŠ¸ì¹´ 24H ë¹¡ì„¸ê²Œ!"],
            map: "ì§€ë„", parking: "ì£¼ì°¨", warn: "ë„ë¡œ ì´¬ì˜ ê¸ˆì§€! ë³´í–‰ì í†µë¡œ ì´ìš©",
            flower: "ì•„íƒ€ë¯¸ ë²šê½ƒ&ë§¤í™” ì ˆì • ì‹œê¸°!",
            warn48: "24ì‹œê°„ ë ŒíŠ¸ ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘!",
            prev: "ì´ì „ ë‚ ", next: "ë‹¤ìŒ ë‚ ", top: "ë§¨ ìœ„ë¡œ",
            days: ["1/29 (ëª©)", "1/30 (ê¸ˆ)", "1/31 (í† )", "2/1 (ì¼)", "2/2 (ì›”)", "2/3 (í™”)"],
            dayTitles: ["ì‹œì¦ˆì˜¤ì¹´ ë„ì°© & í›„ì§€ì‚°", "ì•„íƒ€ë¯¸ ê½ƒêµ¬ê²½ & ë„ì¿„í–‰", "ë„ì¿„: ë ˆíŠ¸ë¡œ & ì‹ ì£¼ì¿  ë°¤", "ë„ì¿„: ì‹œë¶€ì•¼ & ììœ ", "ë„ì¿„: ì™„ì „ ììœ  (Free Day)", "ê·€êµ­ (17:00)"],
            chkTitle: "ğŸš— ì—¬í–‰ ì¤€ë¹„ë¬¼",
            infoTitle1: "ğŸ†˜ ê¸´ê¸‰ ì—°ë½ì²˜ (í„°ì¹˜ ì‹œ ì—°ê²°)", infoTitle2: "ğŸ”— í•„ìˆ˜ ì›¹ì‚¬ì´íŠ¸", infoTitle3: "ğŸ’¡ ì—¬í–‰ ê¸°ì´ˆ ìƒì‹",
            police: "ê²½ì°°ì„œ", fire: "í™”ì¬/êµ¬ê¸‰ì°¨", embassy: "ì£¼ì¼ë³¸ í•œêµ­ëŒ€ì‚¬ê´€",
            visitJapan: "ë¹„ì§“ì¬íŒ¬ì›¹ (ì…êµ­ìˆ˜ì†)", translate: "êµ¬ê¸€ ë²ˆì—­ê¸°", weather: "ì‹œì¦ˆì˜¤ì¹´ ë‚ ì”¨",
            volt: "ì „ì•• 110V (ë¼ì§€ì½” í•„ìˆ˜)", tip: "íŒ ë¬¸í™” ì—†ìŒ", taxfree: "ë©´ì„¸ 5,500ì—” ì´ìƒ"
        },
        ja: {
            title: "é™å²¡ & æ±äº¬ (6æ—¥)", sch: "æ—¥ç¨‹", chk: "ãƒã‚§ãƒƒã‚¯", info: "æƒ…å ±",
            tips: ["é™å²¡(1-2æ—¥): ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼24H!"],
            map: "åœ°å›³", parking: "é§è»Šå ´", warn: "è»Šé“ã§ã®æ’®å½±ç¦æ­¢ï¼æ­©é“ã‚’åˆ©ç”¨",
            flower: "ç†±æµ·æ¡œãƒ»æ¢…ã®è¦‹é ƒï¼",
            warn48: "24æ™‚é–“ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼é–‹å§‹ï¼",
            prev: "å‰æ—¥", next: "ç¿Œæ—¥", top: "ãƒˆãƒƒãƒ—ã¸",
            days: ["1/29 (æœ¨)", "1/30 (é‡‘)", "1/31 (åœŸ)", "2/1 (æ—¥)", "2/2 (æœˆ)", "2/3 (ç«)"],
            dayTitles: ["é™å²¡åˆ°ç€ & å¯Œå£«å±±", "ç†±æµ· & æ±äº¬ã¸", "æ±äº¬: ãƒ¬ãƒˆãƒ­ & æ–°å®¿ã®å¤œ", "æ±äº¬: æ¸‹è°· & è‡ªç”±", "æ±äº¬: ãƒ•ãƒªãƒ¼ãƒ‡ãƒ¼", "å¸°å›½ (17:00)"],
            chkTitle: "ğŸš— æ—…è¡Œæº–å‚™ç‰©",
            infoTitle1: "ğŸ†˜ ç·Šæ€¥é€£çµ¡å…ˆ", infoTitle2: "ğŸ”— å¿…é ˆã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ", infoTitle3: "ğŸ’¡ æ—…è¡ŒåŸºç¤çŸ¥è­˜",
            police: "è­¦å¯Ÿ", fire: "æ¶ˆé˜²/æ•‘æ€¥", embassy: "éŸ“å›½å¤§ä½¿é¤¨",
            visitJapan: "Visit Japan Web", translate: "Googleç¿»è¨³", weather: "é™å²¡ã®å¤©æ°—",
            volt: "é›»åœ§ 110V (ã‚¢ãƒ€ãƒ—ã‚¿å¿…é ˆ)", tip: "ãƒãƒƒãƒ—ä¸è¦", taxfree: "å…ç¨ 5,500å††ä»¥ä¸Š"
        }
    };

    // --- ì¼ì • ë°ì´í„° (6ì¼ ì••ì¶• ë²„ì „ / 1ì›” ê³ ì •) ---
    function getEvents() {
        return [
            // Day 1: ë ŒíŠ¸ì¹´ 24H ì‹œì‘ & í›„ì§€ì‚° ì˜¬ì¸ (ì—¬ê¸´ ë¹¡ì„¸ê²Œ!)
            [
                {t:"09:10", title:{ko:"ì‹œì¦ˆì˜¤ì¹´ ê³µí•­ ë„ì°©", ja:"é™å²¡ç©ºæ¸¯åˆ°ç€"}, desc:{ko:"ì…êµ­ ì‹¬ì‚¬ í›„ ë ŒíŠ¸ì¹´ ë°ìŠ¤í¬ë¡œ!", ja:"å…¥å›½å¯©æŸ»å¾Œãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼ã¸ï¼"}, emoji:"âœˆï¸", type:"fly"},
                {t:"10:00", title:{ko:"ğŸš— ë ŒíŠ¸ì¹´ ìˆ˜ë ¹ (24H)", ja:"ğŸš— ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼å—å– (24H)"}, desc:{ko:"ê³µí•­ ìˆ˜ë ¹ â†’ ë‚´ì¼ ë¯¸ì‹œë§ˆ ë°˜ë‚©\n(ETC ì¹´ë“œ ëŒ€ì—¬ í•„ìˆ˜)", ja:"ç©ºæ¸¯å—å– â†’ æ˜æ—¥ä¸‰å³¶è¿”å´"}, emoji:"ğŸš—", type:"car", warn48:true},
                {t:"11:30", title:{ko:"ğŸ“ ì˜¤ë¶€ì¹˜ì‚¬ì‚¬ë°”", ja:"ğŸ“ å¤§æ·µç¬¹å ´"}, desc:{ko:"í›„ì§€ì‚°+ë…¹ì°¨ë°­ ë·° (ì ì‹¬ì€ ì´ë™ì¤‘ í¸ì˜ì )", ja:"å¯Œå£«å±±+èŒ¶ç•‘ã®çµ¶æ™¯"}, trans:{ko:"[ğŸš— ê³ ì†ë„ë¡œ | 50ë¶„]", ja:"[ğŸš— é«˜é€Ÿ | 50åˆ†]"}, emoji:"ğŸµ", type:"camera", loc:"Obuchi Sasaba", p:"Free"},
                {t:"13:00", title:{ko:"ğŸ’§ ì‹œë¼ì´í†  í­í¬", ja:"ğŸ’§ ç™½ç³¸ã®æ»"}, desc:{ko:"í­í¬ & ì•¼í‚¤ì†Œë°” ê°„ì‹", ja:"æ» & ç„¼ããã°"}, trans:{ko:"[ğŸš— êµ­ë„ | 25ë¶„]", ja:"[ğŸš— å›½é“ | 25åˆ†]"}, emoji:"ğŸ“·", type:"water", loc:"Shiraito Falls", p:"500Â¥"},
                {t:"15:00", title:{ko:"ğŸ“ í›„ì§€ì‚° ê¿ˆì˜ ëŒ€êµ", ja:"ğŸ“ å¯Œå£«å±±å¤¢ã®å¤§æ©‹"}, desc:{ko:"ìœ¡êµ ì¸ìƒìƒ· (ì°¨ ì—†ìœ¼ë©´ ëª» ì˜´!)", ja:"æ­©é“æ©‹ã§ã®è¨˜å¿µæ’®å½±"}, trans:{ko:"[ğŸš— êµ­ë„ | 40ë¶„]", ja:"[ğŸš— å›½é“ | 40åˆ†]"}, emoji:"ğŸŒ‰", type:"camera", loc:"Fuji Central Park", warn:true},
                {t:"17:00", title:{ko:"ë¯¸ì‹œë§ˆ ìˆ™ì†Œ ì²´í¬ì¸", ja:"ä¸‰å³¶ãƒ›ãƒ†ãƒ«ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³"}, desc:{ko:"ë¯¸ì‹œë§ˆì—­ ê·¼ì²˜ (ë‚´ì¼ ë°˜ë‚© ìš©ì´)", ja:"ä¸‰å³¶é§…è¿‘ã"}, trans:{ko:"[ğŸš— êµ­ë„ | 40ë¶„]", ja:"[ğŸš— å›½é“ | 40åˆ†]"}, emoji:"ğŸ¨", type:"bed", loc:"Mishima Station"},
                {t:"18:30", title:{ko:"ì €ë…: ì¥ì–´ ë®ë°¥", ja:"å¤•é£Ÿ: ã†ãªãä¸¼"}, desc:{ko:"ë¯¸ì‹œë§ˆ ëª…ë¬¼! ì‚¬ì¿ ë¼ì•¼/ìš°ë‚˜ìš”ì‹œ", ja:"ä¸‰å³¶åç‰©ï¼æ¡œå®¶/ã†ãªã‚ˆã—"}, emoji:"ğŸ±", type:"food", loc:"Sakuraya Mishima"}
            ],
            // Day 2: ë°˜ë‚© & ì•„íƒ€ë¯¸ & ìš”ì½”í•˜ë§ˆ (ì´ë™ì˜ ë‚ )
            [
                {t:"09:30", title:{ko:"â›½ ì£¼ìœ  & ì°¨ëŸ‰ ë°˜ë‚©", ja:"â›½ çµ¦æ²¹ & è»Šä¸¡è¿”å´"}, desc:{ko:"ë¯¸ì‹œë§ˆì—­ ì˜ì—…ì†Œ ë°˜ë‚© (24H ì„¸ì´ë¸Œ!)", ja:"ä¸‰å³¶é§…å–¶æ¥­æ‰€è¿”å´ (24Hã‚»ãƒ¼ãƒ–!)"}, emoji:"ğŸ", type:"map", loc:"Mishima Station"},
                {t:"10:15", title:{ko:"ì•„íƒ€ë¯¸ë¡œ ì´ë™", ja:"ç†±æµ·ã¸ç§»å‹•"}, desc:{ko:"ì§ì€ ì—­ ì½”ì¸ë½ì»¤ì— ë³´ê´€", ja:"è·ç‰©ã¯é§…ã®ãƒ­ãƒƒã‚«ãƒ¼ã¸"}, trans:{ko:"[ğŸš† ì „ì²  | 15ë¶„]", ja:"[ğŸš† é›»è»Š | 15åˆ†]"}, emoji:"ğŸš†", type:"train"},
                {t:"10:45", title:{ko:"ğŸŒ¸ ì•„íƒ€ë¯¸ ë§¤í™”ì›/ë²šê½ƒ", ja:"ğŸŒ¸ ç†±æµ·æ¢…åœ’/æ¡œ"}, desc:{ko:"1ì›” ë§: ë§¤í™” & ì´í† ê°€ì™€ ë²šê½ƒ ì ˆì •", ja:"1æœˆæœ«: æ¢… & ç³¸å·æ¡œãŒè¦‹é ƒ"}, emoji:"ğŸ“·", type:"flower", loc:"Atami Baien"},
                {t:"13:00", title:{ko:"ìš”ì½”í•˜ë§ˆ ì´ë™", ja:"æ¨ªæµœã¸ç§»å‹•"}, desc:{ko:"ì‹ ì¹¸ì„¼(20ë¶„) or ì „ì² (60ë¶„)", ja:"æ–°å¹¹ç·š(20åˆ†) or é›»è»Š(60åˆ†)"}, emoji:"ğŸš†", type:"train"},
                {t:"14:30", title:{ko:"ğŸ‡¨ğŸ‡³ ìš”ì½”í•˜ë§ˆ ì°¨ì´ë‚˜íƒ€ìš´", ja:"ğŸ‡¨ğŸ‡³ æ¨ªæµœä¸­è¯è¡—"}, desc:{ko:"ëŠ¦ì€ ì ì‹¬: ê¸¸ê±°ë¦¬ ìŒì‹ & ë§Œë‘", ja:"é…ã‚ã®ãƒ©ãƒ³ãƒ: é£Ÿã¹æ­©ã"}, emoji:"ğŸ¥Ÿ", type:"food", loc:"Yokohama Chinatown"},
                {t:"16:30", title:{ko:"ğŸ§± ì•„ì¹´ë Œê°€ & ì•¼ê²½", ja:"ğŸ§± èµ¤ãƒ¬ãƒ³ã‚¬ & å¤œæ™¯"}, desc:{ko:"í•­êµ¬ ì‚°ì±… & ì—ì–´ ìºë¹ˆ íƒ‘ìŠ¹", ja:"æ¸¯æ•£ç­– & ã‚¨ã‚¢ã‚­ãƒ£ãƒ“ãƒ³"}, emoji:"ğŸŒƒ", type:"camera", loc:"Yokohama Red Brick Warehouse"},
                {t:"19:00", title:{ko:"ë„ì¿„ë¡œ ì´ë™ (ì²´í¬ì¸)", ja:"æ±äº¬ã¸ç§»å‹•"}, desc:{ko:"ìˆ™ì†Œ: í˜•ë„¤ ì§‘ ë„ì°©! ğŸ ", ja:"å®¿: å…„ã®å®¶ã«åˆ°ç€ï¼"}, emoji:"ğŸ ", type:"bed"}
            ],
            // Day 3: ë„ì¿„ ë ˆíŠ¸ë¡œ -> ì‹ ì£¼ì¿  ë¶ˆí† !
            [
                {t:"10:00", title:{ko:"ìš°ì—ë…¸ ê³µì›", ja:"ä¸Šé‡æ©è³œå…¬åœ’"}, desc:{ko:"ê²¨ìš¸ ëª¨ë€ì› & ë°•ë¬¼ê´€ ì‚°ì±… (ì„ íƒ)", ja:"å†¬ã¼ãŸã‚“ & åšç‰©é¤¨ (é¸æŠ)"}, emoji:"ğŸŒ³", type:"park", loc:"Ueno Park"},
                {t:"12:00", title:{ko:"ì•„ë©”ìš”ì½” ì‹œì¥ êµ¬ê²½", ja:"ã‚¢ãƒ¡æ¨ªå•†åº—è¡—"}, desc:{ko:"í™œê¸°ì°¬ ì‹œì¥ ë¶„ìœ„ê¸° & ê¸¸ê±°ë¦¬ ê°„ì‹", ja:"æ´»æ°—ã‚ã‚‹å¸‚å ´ & ã‚¹ãƒŠãƒƒã‚¯"}, emoji:"ğŸ¢", type:"food", loc:"Ameyoko"},
                {t:"14:00", title:{ko:"ğŸˆ ì•¼ë‚˜ì¹´ ê¸´ì", ja:"ğŸˆ è°·ä¸­éŠ€åº§"}, desc:{ko:"ê³ ì–‘ì´ ë§ˆì„ ì‚°ì±… (í˜ë“¤ë©´ íŒ¨ìŠ¤)", ja:"çŒ«ã®ç”ºæ•£ç­– (ç–²ã‚ŒãŸã‚‰ãƒ‘ã‚¹)"}, emoji:"ğŸ“·", type:"camera", loc:"Yanaka Ginza"},
                {t:"18:00", title:{ko:"ğŸ”¥ ì‹ ì£¼ì¿  ë¶ˆí†  (ìˆ  í•œì”)", ja:"ğŸ”¥ æ–°å®¿ã®å¤œ (é£²ã¿ä¼š)"}, desc:{ko:"ê³¨ë“ ê°€ì´ or ì˜¤ëª¨ì´ë° ìš”ì½”ì´ˆ! í† ìš”ì¼ ë°¤ ì¦ê¸°ê¸°", ja:"ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³è¡— or æ€ã„å‡ºæ¨ªä¸ï¼"}, emoji:"ğŸº", type:"beer", loc:"Shinjuku Golden Gai"}
            ],
            // Day 4: ì‹œë¶€ì•¼ ìŠ¤ì¹´ì´ë§Œ ì±™ê¸°ê¸° -> ì €ë… ììœ 
            [
                {t:"10:00", title:{ko:"â›©ï¸ ì•„ì‚¬ì¿ ì‚¬ ì„¼ì†Œì§€", ja:"â›©ï¸ æµ…è‰å¯º"}, desc:{ko:"ê´€ê´‘ê° ëª¨ë“œë¡œ ì‚¬ì§„ ì°ê¸°", ja:"è¦³å…‰å®¢ãƒ¢ãƒ¼ãƒ‰ã§å†™çœŸ"}, emoji:"â›©ï¸", type:"camera", loc:"Senso-ji"},
                {t:"12:00", title:{ko:"ì ì‹¬: ììœ ", ja:"ãƒ©ãƒ³ãƒ: è‡ªç”±"}, desc:{ko:"ì•„ì‚¬ì¿ ì‚¬ ëª¬ìì•¼í‚¤ or ì•„ë¬´ê±°ë‚˜", ja:"ã‚‚ã‚“ã˜ã‚ƒç„¼ã or ä½•ã§ã‚‚"}, emoji:"ğŸ¥˜", type:"food"},
                {t:"14:00", title:{ko:"â˜• ë„ì¿„ ë¯¸ì¦ˆë§ˆì¹˜/ì¹´í˜", ja:"â˜• ã‚«ãƒ•ã‚§ã‚¿ã‚¤ãƒ "}, desc:{ko:"ê°•ë³€ ì¹´í˜ì—ì„œ ì‰¬ê¸°", ja:"å·æ²¿ã„ã‚«ãƒ•ã‚§ã§ä¼‘æ†©"}, emoji:"â˜•", type:"shop", loc:"Tokyo Mizumachi"},
                {t:"16:00", title:{ko:"ì‹œë¶€ì•¼ë¡œ ì´ë™ (ê¸´ìì„ )", ja:"æ¸‹è°·ã¸ç§»å‹•"}, desc:{ko:"ì§€í•˜ì²  íƒ€ê³  ì•‰ì•„ì„œ ë© ë•Œë¦¬ê¸°", ja:"åœ°ä¸‹é‰„ã§ç§»å‹•"}, trans:{ko:"[ğŸš† ì§€í•˜ì²  | 40ë¶„]", ja:"[ğŸš† åœ°ä¸‹é‰„ | 40åˆ†]"}, emoji:"ğŸš†", type:"train"},
                {t:"17:30", title:{ko:"ğŸŒƒ ì‹œë¶€ì•¼ ìŠ¤ì¹´ì´ (ì˜ˆì•½)", ja:"ğŸŒƒ æ¸‹è°·ã‚¹ã‚«ã‚¤ (äºˆç´„)"}, desc:{ko:"ì´ê²ƒë§Œ ì‹œê°„ ë§ì¶°ì„œ ê°€ê¸°!", ja:"ã“ã‚Œã ã‘ã¯æ™‚é–“å³å®ˆï¼"}, emoji:"ğŸ™ï¸", type:"camera", loc:"Shibuya Sky"},
                {t:"19:30", title:{ko:"ì €ë…: ììœ  ì¼ì •", ja:"å¤•é£Ÿ: è‡ªç”±æ—¥ç¨‹"}, desc:{ko:"ë¯¸ì•¼ì‹œíƒ€ íŒŒí¬ êµ¬ê²½ or ì§‘ìœ¼ë¡œ!", ja:"å®®ä¸‹ãƒ‘ãƒ¼ã‚¯ or å¸°å®…ï¼"}, emoji:"ğŸ¤·â€â™‚ï¸", type:"free"}
            ],
            // Day 5: ì™„ì „ ììœ ì˜ ë‚  (Free Day)
            [
                {t:"11:00", title:{ko:"ëŠ¦ì  & ììœ  ì‹œê°„", ja:"å¯åŠ & è‡ªç”±æ™‚é–“"}, desc:{ko:"ê°€ê³  ì‹¶ì—ˆë˜ ê³³ ê°€ê±°ë‚˜ ì¹´í˜ ë†€ì´", ja:"è¡ŒããŸã‹ã£ãŸå ´æ‰€ or ã‚«ãƒ•ã‚§"}, emoji:"â˜•", type:"free"},
                {t:"14:00", title:{ko:"ë™ë„¤ ë§ˆíŠ¸ ì¥ë³´ê¸°", ja:"ã‚¹ãƒ¼ãƒ‘ãƒ¼ã§è²·ã„ç‰©"}, desc:{ko:"í˜„ì§€ ì‹ì¬ë£Œ êµ¬ê²½ (Life, Summit ë“±)", ja:"ç¾åœ°ã‚¹ãƒ¼ãƒ‘ãƒ¼è¦‹å­¦"}, emoji:"ğŸ›’", type:"shop"},
                {t:"16:00", title:{ko:"í˜•ì´ë‘ ì €ë… ë­ ë¨¹ì§€?", ja:"å…„ã¨å¤•é£Ÿä½•é£Ÿã¹ã‚‹ï¼Ÿ"}, desc:{ko:"ì§‘ë°¥ or ë™ë„¤ ì´ìì¹´ì•¼ (ê¸°ë¶„ëŒ€ë¡œ)", ja:"å®¶ã”é£¯ or è¿‘æ‰€ã®å±…é…’å±‹"}, emoji:"ğŸ³", type:"home"},
                {t:"20:00", title:{ko:"ì§ ì •ë¦¬ & íœ´ì‹", ja:"è·é€ ã‚Š & ä¼‘æ†©"}, desc:{ko:"ë§ˆì§€ë§‰ ë°¤ í¸í•˜ê²Œ ì‰¬ê¸°", ja:"æœ€å¾Œã®å¤œã¯ã‚†ã£ãã‚Š"}, emoji:"ğŸ§³", type:"bed"}
            ],
            // Day 6: ê·€êµ­
            [
                {t:"10:00", title:{ko:"ì²´í¬ì•„ì›ƒ & ê³µí•­ ì´ë™", ja:"ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ & ç©ºæ¸¯ã¸"}, desc:{ko:"í˜•ì´ë‘ ì¸ì‚¬í•˜ê³  ê³µí•­ìœ¼ë¡œ!", ja:"å…„ã«æŒ¨æ‹¶ã—ã¦ç©ºæ¸¯ã¸ï¼"}, trans:{ko:"[ğŸš† ìŠ¤ì¹´ì´ë¼ì´ë„ˆ ë“± | 60ë¶„]", ja:"[ğŸš† ã‚¹ã‚«ã‚¤ãƒ©ã‚¤ãƒŠãƒ¼ç­‰ | 60åˆ†]"}, emoji:"ğŸš†", type:"train"},
                {t:"12:30", title:{ko:"ê³µí•­ ë„ì°© & ìˆ˜ì†", ja:"ç©ºæ¸¯åˆ°ç€ & æ‰‹ç¶šã"}, desc:{ko:"ë™ì „ í„¸ê¸° & ë©´ì„¸ì ", ja:"å°éŠ­æ¶ˆè²» & å…ç¨åº—"}, emoji:"âœˆï¸", type:"fly"},
                {t:"17:00", title:{ko:"âœˆï¸ í•œêµ­ìœ¼ë¡œ ê·€êµ­", ja:"âœˆï¸ éŸ“å›½ã¸å¸°å›½"}, desc:{ko:"ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤! ğŸ˜Š", ja:"ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼"}, emoji:"ğŸ ", type:"bed"}
            ]
        ];
    }

    // --- ì•ˆì „ í˜¸ì¶œ ---
    window.safeCall = function(number, name) {
        if (confirm(name + " (" + number + ") ì—°ê²°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            window.location.href = "tel:" + number;
        }
    };

    // --- ë Œë”ë§ í•¨ìˆ˜ ---
    function render() {
        var txt = LOCALE_DATA[appState.lang];
        var themeColor = 'text-main';
        var activeBtn = 'active';

        // 1. í—¤ë” ì—…ë°ì´íŠ¸
        document.getElementById('lang-text').innerText = appState.lang === 'ko' ? 'æ—¥æœ¬èª' : 'í•œêµ­ì–´';
        document.getElementById('app-title').innerText = txt.title;
        
        var navSch = document.getElementById('nav-btn-sch');
        var navChk = document.getElementById('nav-btn-chk');
        var navInfo = document.getElementById('nav-btn-info');
        
        navSch.className = appState.tab === 'itinerary' ? 'nav-btn ' + activeBtn : 'nav-btn';
        navChk.className = appState.tab === 'check' ? 'nav-btn ' + activeBtn : 'nav-btn';
        navInfo.className = appState.tab === 'info' ? 'nav-btn ' + activeBtn : 'nav-btn';

        // 2. ì»¨í…ì¸ 
        var content = document.getElementById('content-area');
        content.innerHTML = '';

        // íŒ ë°•ìŠ¤ (í•­ìƒ í‘œì‹œ)
        if (appState.tab === 'itinerary') {
            document.getElementById('tip-container').style.display = 'block';
            var tips = txt.tips;
            var tipHtml = '';
            tips.forEach(function(t) {
                tipHtml += '<li class="tip-item"><span style="font-weight:bold" class="'+themeColor+'">âœ”</span> ' + t + '</li>';
            });
            document.getElementById('tip-list').innerHTML = tipHtml;
        } else {
            document.getElementById('tip-container').style.display = 'none';
        }

        // íƒ­ë³„ ë‚´ìš©
        if (appState.tab === 'itinerary') {
            var daysArr = txt.days;
            var titlesArr = txt.dayTitles;
            
            var daysHtml = '<div class="day-tabs">';
            daysArr.forEach(function(d, i) {
                var isActive = (i + 1) === appState.day;
                var cls = isActive ? 'day-btn ' + activeBtn : 'day-btn inactive';
                daysHtml += '<button onclick="setDay('+(i+1)+')" class="'+cls+'">Day '+(i+1)+'</button>';
            });
            daysHtml += '</div>';

            var currentEvents = getEvents()[appState.day - 1];
            var eventsHtml = '<div class="card">';
            eventsHtml += '<div class="card-header"><div>';
            eventsHtml += '<span class="date-text '+ themeColor +'">'+ daysArr[appState.day-1] +'</span>';
            eventsHtml += '<div class="card-title">'+ titlesArr[appState.day-1] +'</div>';
            eventsHtml += '</div></div>';
            
            eventsHtml += '<div>';
            if(currentEvents) {
                currentEvents.forEach(function(e) {
                    var mapBtn = e.loc ? '<button onclick="openMap(\''+e.loc+'\')" class="btn-map btn-map-main">ğŸ“ '+txt.map+'</button>' : '';
                    var badges = '';
                    if(e.p) badges += '<span class="badge badge-park">ğŸ…¿ï¸ ' + e.p + '</span>';
                    if(e.flower) badges += '<div class="badge badge-flower">ğŸŒ¸ ' + txt.flower + '</div>';
                    if(e.warn48) badges += '<div class="badge badge-time">â° ' + txt.warn48 + '</div>';

                    var iconClass = 'icon-' + (e.type || 'car');

                    eventsHtml += '<div class="event-item">';
                    eventsHtml += '<div class="icon-box '+iconClass+'">'+e.emoji+'</div>';
                    eventsHtml += '<div class="event-content">';
                    eventsHtml += '<div style="display:flex; justify-content:space-between; align-items:center;">';
                    eventsHtml += '<span class="time-badge">'+e.t+'</span>' + mapBtn;
                    eventsHtml += '</div>';
                    eventsHtml += '<div class="event-title">'+ e.title[appState.lang] +'</div>';
                    if(e.trans) eventsHtml += '<div class="trans-info">'+ e.trans[appState.lang] +'</div>';
                    eventsHtml += '<div class="event-desc">'+ e.desc[appState.lang] +'</div>';
                    eventsHtml += badges;
                    eventsHtml += '</div></div>';
                });
            }
            eventsHtml += '</div>';
            
            eventsHtml += '<div class="nav-controls">';
            if (appState.day > 1) eventsHtml += '<button onclick="setDay('+(appState.day-1)+')" class="nav-control-btn">â—€ '+txt.prev+'</button>';
            else eventsHtml += '<div></div>';
            eventsHtml += '<button onclick="scrollToTop()" class="nav-control-btn btn-top">â¬† '+txt.top+'</button>';
            if (appState.day < 6) eventsHtml += '<button onclick="setDay('+(appState.day+1)+')" class="nav-control-btn">'+txt.next+' â–¶</button>';
            else eventsHtml += '<div></div>';
            eventsHtml += '</div></div>';

            content.innerHTML = daysHtml + eventsHtml;
        }
        else if (appState.tab === 'check') {
             var listHtml = '<div class="card"><h2 class="card-title" style="margin-bottom:1rem;">'+txt.chkTitle+'</h2>';
             
             var chkList = [
                 {id:"c1", ko:"ì—¬ê¶Œ & í•­ê³µê¶Œ", ja:"ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ & èˆªç©ºåˆ¸"},
                 {id:"c2", ko:"êµ­ì œìš´ì „ë©´í—ˆì¦ (í•„ìˆ˜)", ja:"å›½éš›é‹è»¢å…è¨±è¨¼ (å¿…é ˆ)"},
                 {id:"c3", ko:"í•œêµ­ ë©´í—ˆì¦ (ë ŒíŠ¸ ì‹œ ìš”êµ¬)", ja:"éŸ“å›½ã®å…è¨±è¨¼"},
                 {id:"c4", ko:"Suica (ì• í”Œí˜ì´/í˜„ë¬¼)", ja:"Suica (Apple Pay/ç¾ç‰©)"},
                 {id:"c5", ko:"110v ë¼ì§€ì½” ì–´ëŒ‘í„°", ja:"110v é›»æºã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼"},
                 {id:"c6", ko:"ë³´ì¡°ë°°í„°ë¦¬", ja:"ãƒ¢ãƒã‚¤ãƒ«ãƒãƒƒãƒ†ãƒªãƒ¼"},
                 {id:"c7", ko:"ë™ì „ ì§€ê°‘ (í•„ìˆ˜)", ja:"å°éŠ­å…¥ã‚Œ (å¿…é ˆ)"},
                 {id:"c8", ko:"ì£¼ì°¨ë¹„ìš© (í˜„ê¸ˆ 1000ì—”ê¶Œ)", ja:"é§è»Šæ–™é‡‘ (ç¾é‡‘)"},
                 {id:"c9", ko:"í¸í•œ ìš´ë™í™”", ja:"æ­©ãã‚„ã™ã„é´"}
             ];

             chkList.forEach(function(item) {
                 var isChecked = appState.checks[item.id];
                 
                 listHtml += '<div onclick="toggleCheck(\''+item.id+'\')" class="check-item '+(isChecked?'checked':'')+'">';
                 listHtml += '<div class="check-box">'+(isChecked?'âœ”':'')+'</div>';
                 listHtml += '<span>'+ item[appState.lang] +'</span>';
                 listHtml += '</div>';
             });
             listHtml += '</div>';
             content.innerHTML = listHtml;
        }
        else if (appState.tab === 'info') {
             var infoHtml = '<div class="card"><h2 class="card-title" style="margin-bottom:1rem;">'+txt.infoTitle1+'</h2>';
             infoHtml += '<div class="info-item" onclick="safeCall(\'110\', \''+txt.police+'\')"><div class="info-label">ğŸ‘®â€â™‚ï¸ '+txt.police+'</div><span class="call-btn">110</span></div>';
             infoHtml += '<div class="info-item" onclick="safeCall(\'119\', \''+txt.fire+'\')"><div class="info-label">ğŸš‘ '+txt.fire+'</div><span class="call-btn">119</span></div>';
             infoHtml += '<div class="info-item" onclick="safeCall(\'+81-3-3452-7611\', \''+txt.embassy+'\')"><div class="info-label">ğŸ‡°ğŸ‡· '+txt.embassy+'</div><span class="call-btn">Call</span></div>';
             infoHtml += '</div>';

             infoHtml += '<div class="card"><h2 class="card-title" style="margin-bottom:1rem;">'+txt.infoTitle2+'</h2>';
             infoHtml += '<a href="https://www.vjw.digital.go.jp/" target="_blank" class="info-item"><div class="info-label">ğŸ“ '+txt.visitJapan+'</div><span class="link-btn">Go</span></a>';
             infoHtml += '<a href="https://translate.google.co.kr/" target="_blank" class="info-item"><div class="info-label">ğŸ—£ï¸ '+txt.translate+'</div><span class="link-btn">Go</span></a>';
             infoHtml += '<a href="https://tenki.jp/forecast/5/25/" target="_blank" class="info-item"><div class="info-label">â˜€ï¸ '+txt.weather+'</div><span class="link-btn">Go</span></a>';
             infoHtml += '</div>';

             infoHtml += '<div class="card"><h2 class="card-title" style="margin-bottom:1rem;">'+txt.infoTitle3+'</h2>';
             infoHtml += '<div class="info-item"><div class="info-label">âš¡ '+txt.volt+'</div></div>';
             infoHtml += '<div class="info-item"><div class="info-label">ğŸ’¸ '+txt.tip+'</div></div>';
             infoHtml += '<div class="info-item"><div class="info-label">ğŸ›ï¸ '+txt.taxfree+'</div></div>';
             infoHtml += '</div>';
             
             content.innerHTML = infoHtml;
        }

        var navSch = document.getElementById('nav-btn-sch');
        var navChk = document.getElementById('nav-btn-chk');
        var navInfo = document.getElementById('nav-btn-info');
        
        navSch.className = appState.tab === 'itinerary' ? 'nav-btn ' + activeBtn : 'nav-btn';
        navChk.className = appState.tab === 'check' ? 'nav-btn ' + activeBtn : 'nav-btn';
        navInfo.className = appState.tab === 'info' ? 'nav-btn ' + activeBtn : 'nav-btn';
    }

    // --- Actions ---
    window.toggleLang = function() { appState.lang = (appState.lang === 'ko' ? 'ja' : 'ko'); render(); };
    window.setTab = function(t) {
        if (appState.tab === 'itinerary') itineraryScrollPos = document.getElementById('main-scroll').scrollTop;
        appState.tab = t; render();
        if (t === 'itinerary') document.getElementById('main-scroll').scrollTop = itineraryScrollPos;
        else document.getElementById('main-scroll').scrollTop = 0;
    };
    window.setDay = function(d) { appState.day = d; render(); scrollToTop(); };
    window.openMap = function(q) { window.open('https://www.google.com/maps/search/?api=1&query=' + encodeURIComponent(q), '_blank'); };
    window.toggleCheck = function(id) { appState.checks[id] = !appState.checks[id]; render(); };
    window.scrollToTop = function() { document.getElementById('main-scroll').scrollTo({ top: 0, behavior: 'smooth' }); };
    
    // Scroll Header Effect
    document.getElementById('main-scroll').addEventListener('scroll', function() {
        var header = document.getElementById('main-header');
        if (this.scrollTop > 20) header.classList.add('shrink');
        else header.classList.remove('shrink');
    });

    render();
</script>
</body>
</html>
