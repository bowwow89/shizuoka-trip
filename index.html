<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ì‹œì¦ˆì˜¤ì¹´ ì—¬í–‰ ê°€ì´ë“œ</title>
<style>
    /* --- 1. ê¸°ë³¸ ì„¤ì • (Reset) --- */
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f3f4f6; color: #1f2937; height: 100vh; display: flex; justify-content: center; overflow: hidden; }
    
    /* --- 2. ë ˆì´ì•„ì›ƒ --- */
    .app-container { width: 100%; max-width: 480px; height: 100%; background-color: #f9fafb; display: flex; flex-direction: column; position: relative; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
    
    /* --- 3. í—¤ë” ìŠ¤íƒ€ì¼ --- */
    header { padding: 1.5rem; padding-bottom: 2rem; border-bottom-left-radius: 1.5rem; border-bottom-right-radius: 1.5rem; color: white; flex-shrink: 0; transition: background 0.3s; }
    .bg-gradient-car { background: linear-gradient(to right, #4f46e5, #3b82f6); } /* Indigo to Blue */
    .bg-gradient-pub { background: linear-gradient(to right, #0d9488, #10b981); } /* Teal to Emerald */
    
    .lang-btn { position: absolute; top: 1.5rem; right: 1.5rem; background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.4rem 0.8rem; border-radius: 9999px; font-size: 0.75rem; font-weight: bold; cursor: pointer; backdrop-filter: blur(4px); display: flex; align-items: center; gap: 4px; }
    .title { font-size: 1.5rem; font-weight: 800; margin-top: 0.5rem; margin-bottom: 1rem; }
    
    /* ëª¨ë“œ ì „í™˜ í† ê¸€ */
    .toggle-container { background: rgba(0,0,0,0.1); padding: 0.25rem; border-radius: 0.75rem; display: flex; }
    .toggle-btn { flex: 1; padding: 0.5rem; border-radius: 0.5rem; font-size: 0.875rem; font-weight: bold; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: all 0.2s; }
    .toggle-btn.active { background-color: white; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
    .toggle-btn.inactive { background: transparent; color: rgba(255,255,255,0.8); }
    
    .text-car { color: #4f46e5; }
    .text-pub { color: #0d9488; }

    /* --- 4. ë©”ì¸ ì»¨í…ì¸  --- */
    main { flex: 1; overflow-y: auto; padding: 1rem; padding-top: 1.5rem; padding-bottom: 6rem; scroll-behavior: smooth; }
    
    /* íŒ ë°•ìŠ¤ */
    .tip-box { background: white; padding: 1rem; border-radius: 1rem; border: 1px solid #e5e7eb; margin-bottom: 1rem; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); animation: fadeIn 0.5s ease-out; }
    .tip-title { font-size: 0.75rem; font-weight: 800; color: #9ca3af; text-transform: uppercase; margin-bottom: 0.5rem; letter-spacing: 0.05em; }
    .tip-item { font-size: 0.875rem; color: #4b5563; margin-bottom: 0.25rem; display: flex; gap: 0.5rem; }
    
    /* ì¼ì • ì¹´ë“œ */
    .day-tabs { display: flex; gap: 0.5rem; overflow-x: auto; padding-bottom: 0.5rem; margin-bottom: 1rem; -ms-overflow-style: none; scrollbar-width: none; }
    .day-tabs::-webkit-scrollbar { display: none; }
    .day-btn { flex-shrink: 0; padding: 0.5rem 1rem; border-radius: 9999px; font-size: 0.875rem; font-weight: bold; border: none; cursor: pointer; transition: all 0.2s; white-space: nowrap; }
    .day-btn.active-car { background-color: #4f46e5; color: white; }
    .day-btn.active-pub { background-color: #0d9488; color: white; }
    .day-btn.inactive { background-color: white; color: #4b5563; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }

    .card { background: white; border-radius: 1rem; padding: 1.25rem; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); animation: fadeIn 0.3s ease-out; min-height: 300px; }
    .card-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid #f3f4f6; }
    .date-text { font-size: 0.875rem; font-weight: bold; display: block; margin-bottom: 0.25rem; }
    .title-text { font-size: 1.25rem; font-weight: 800; color: #1f2937; }

    /* íƒ€ì„ë¼ì¸ ì•„ì´í…œ */
    .event-item { display: flex; gap: 1rem; margin-bottom: 1.5rem; position: relative; }
    .event-item::before { content: ''; position: absolute; left: 19px; top: 2rem; bottom: -1.5rem; width: 2px; background-color: #f3f4f6; z-index: 0; }
    .event-item:last-child::before { display: none; }
    .icon-box { width: 40px; height: 40px; flex-shrink: 0; background-color: #f3f4f6; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; z-index: 1; position: relative; }
    
    /* ì•„ì´ì½˜ ìƒ‰ìƒ í…Œë§ˆ */
    .icon-fly { background-color: #dbeafe; color: #2563eb; }
    .icon-car { background-color: #e0e7ff; color: #4f46e5; }
    .icon-food { background-color: #ffedd5; color: #ea580c; }
    .icon-camera { background-color: #fce7f3; color: #db2777; }
    .icon-cloud { background-color: #cffafe; color: #0891b2; }
    
    .event-content { flex: 1; padding-top: 0.25rem; }
    .time-badge { font-size: 0.75rem; font-weight: bold; color: #6b7280; background: #f3f4f6; padding: 2px 6px; border-radius: 4px; display: inline-block; margin-bottom: 4px;}
    .event-title { font-size: 1rem; font-weight: bold; color: #1f2937; margin-bottom: 0.25rem; }
    .event-desc { font-size: 0.875rem; color: #6b7280; line-height: 1.4; }
    
    /* ë±ƒì§€ë“¤ */
    .badge { display: inline-flex; align-items: center; gap: 4px; font-size: 0.75rem; font-weight: 600; padding: 4px 8px; border-radius: 6px; margin-top: 0.5rem; margin-right: 4px; }
    .badge-park { background: #f3f4f6; color: #4b5563; }
    .badge-warn { background: #fef2f2; color: #dc2626; border: 1px solid #fee2e2; }
    .badge-flower { background: #fdf2f8; color: #db2777; border: 1px solid #fce7f3; }
    .badge-time { background: #eff6ff; color: #1d4ed8; border: 1px solid #dbeafe; }
    .btn-map { font-size: 0.75rem; font-weight: 600; padding: 2px 8px; border-radius: 4px; cursor: pointer; margin-left: auto; float: right; transition: background 0.2s; }
    .btn-map-car { color: #4f46e5; background: #e0e7ff; }
    .btn-map-pub { color: #0d9488; background: #ccfbf1; }

    /* ì²´í¬ë¦¬ìŠ¤íŠ¸ */
    .check-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; border: 1px solid #f3f4f6; border-radius: 0.5rem; margin-bottom: 0.5rem; cursor: pointer; transition: all 0.2s; background: white; }
    .check-box { width: 1.25rem; height: 1.25rem; border-radius: 0.25rem; border: 2px solid #d1d5db; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; transition: all 0.2s; }
    .check-item.checked { background-color: #f9fafb; border-color: #e5e7eb; }
    .check-item.checked span { color: #9ca3af; text-decoration: line-through; }
    .check-item.checked .check-box-car { background-color: #4f46e5; border-color: #4f46e5; }
    .check-item.checked .check-box-pub { background-color: #0d9488; border-color: #0d9488; }

    /* --- 5. í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ --- */
    nav { background: white; border-top: 1px solid #e5e7eb; padding: 0.75rem 1.5rem; display: flex; justify-content: space-between; z-index: 20; padding-bottom: max(0.75rem, env(safe-area-inset-bottom)); }
    .nav-btn { display: flex; flex-direction: column; align-items: center; gap: 2px; background: none; border: none; cursor: pointer; color: #9ca3af; font-size: 0.75rem; font-weight: 600; width: 33%; }
    .nav-btn.active-car { color: #4f46e5; }
    .nav-btn.active-pub { color: #0d9488; }
    .nav-icon { width: 24px; height: 24px; margin-bottom: 2px; }

    /* ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    /* í•˜ë‹¨ ì´ë™ ë²„íŠ¼ */
    .nav-controls { display: flex; justify-content: space-between; align-items: center; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px dashed #e5e7eb; }
    .nav-control-btn { font-size: 0.875rem; font-weight: bold; color: #6b7280; background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 4px; }
    .btn-top { background: #f3f4f6; padding: 8px; border-radius: 50%; }

</style>
</head>
<body>

<div class="app-container">
    
    <!-- Header -->
    <header id="main-header" class="bg-gradient-car">
        <button onclick="toggleLang()" class="lang-btn">
            ğŸŒ <span id="lang-text">æ—¥æœ¬èª</span>
        </button>
        <div id="app-title" class="title">ì‹œì¦ˆì˜¤ì¹´ & í›„ì§€ì‚°</div>
        
        <div class="toggle-container">
            <button onclick="setMode('car')" id="btn-car" class="toggle-btn active text-car">
                ğŸš— <span class="txt-car">ë ŒíŠ¸ì¹´</span>
            </button>
            <button onclick="setMode('public')" id="btn-public" class="toggle-btn inactive">
                ğŸš† <span class="txt-public">ëŒ€ì¤‘êµí†µ</span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-scroll">
        <!-- Tip Box -->
        <div class="tip-box">
            <h3 id="tip-title" class="tip-title">ğŸš— ë ŒíŠ¸ì¹´ & ì£¼ì°¨ íŒ</h3>
            <ul id="tip-list">
                <!-- JS injected -->
            </ul>
        </div>

        <!-- Dynamic Content -->
        <div id="content-area"></div>
    </main>

    <!-- Bottom Nav -->
    <nav>
        <button onclick="setTab('itinerary')" id="nav-btn-sch" class="nav-btn active-car">
            <!-- Calendar Icon SVG -->
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
            <span class="txt-sch">ì¼ì •</span>
        </button>
        <button onclick="setTab('check')" id="nav-btn-chk" class="nav-btn">
            <!-- Check Icon SVG -->
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>
            <span class="txt-chk">ì²´í¬</span>
        </button>
        <button onclick="alert('ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤!')" class="nav-btn">
            <!-- Info Icon SVG -->
            <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
            <span class="txt-info">ì •ë³´</span>
        </button>
    </nav>

</div>

<script>
    /* --- ë°ì´í„° ë° ë¡œì§ (ìˆœìˆ˜ JS) --- */
    
    var appState = {
        tab: 'itinerary',
        day: 1,
        mode: 'car', 
        lang: 'ko',
        checks: {}
    };

    var LOCALE_DATA = {
        ko: {
            title: "ì‹œì¦ˆì˜¤ì¹´ & í›„ì§€ì‚°", rent: "ë ŒíŠ¸ì¹´", pub: "ëŒ€ì¤‘êµí†µ",
            sch: "ì¼ì •", chk: "ì²´í¬", info: "ì •ë³´",
            tipTitleCar: "ğŸš— ë ŒíŠ¸ì¹´ & ì£¼ì°¨ íŒ", tipTitlePub: "ğŸšŒ ëšœë²…ì´ ëª¨ë“œ íŒ",
            tipsCar: ["13:30 ì´í›„ ìˆ˜ë ¹ ì‹œ 48H ìš”ê¸ˆ ì ìš©!", "ê´€ê´‘ì§€ ì£¼ì°¨ëŠ” ëŒ€ë¶€ë¶„ ë¬´ë£Œ!"],
            tipsPub: ["ì‹œë‚´ ì¤‘ì‹¬ ì‡¼í•‘ & ë¨¹ë°© ìµœì í™”", "ë„ì¿„ì—ì„œ ë²šê½ƒ ë³´ë ¤ë©´ 2ì›” ë§ì´ ë”±!"],
            map: "ì§€ë„", parking: "ì£¼ì°¨", warn: "ë„ë¡œ ì´¬ì˜ ê¸ˆì§€! ë³´í–‰ì í†µë¡œ ì´ìš©",
            flower: "ì¹´ì™€ì¦ˆ ë²šê½ƒ ë§Œê°œ ì‹œì¦Œ ì˜ˆìƒ!",
            warn48: "13:30 ì´í›„ ìˆ˜ë ¹ ê¶Œì¥ (48H ì„¸ì´ë¸Œ)",
            prev: "ì´ì „ ë‚ ", next: "ë‹¤ìŒ ë‚ ", top: "ë§¨ ìœ„ë¡œ",
            days: ["2/19 (ëª©)", "2/20 (ê¸ˆ)", "2/21 (í† )", "2/22 (ì¼)", "2/23 (ì›”)"],
            dayTitles: ["ì‹œì¦ˆì˜¤ì¹´ ë„ì°© (09:10)", "í›„ì§€ì‚° íˆ¬ì–´", "ìš”ì½”í•˜ë§ˆ ê´€ê´‘", "ğŸŒ¸ ë²šê½ƒ & ë ˆíŠ¸ë¡œ ë„ì¿„", "ê·€êµ­ (17:00)"],
            chkTitleCar: "ğŸš— ë“œë¼ì´ë¸Œ ì¤€ë¹„ë¬¼", chkTitlePub: "ğŸšŒ ëšœë²…ì´ ì¤€ë¹„ë¬¼"
        },
        ja: {
            title: "é™å²¡ & å¯Œå£«å±±", rent: "ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼", pub: "å…¬å…±äº¤é€š",
            sch: "æ—¥ç¨‹", chk: "ãƒã‚§ãƒƒã‚¯", info: "æƒ…å ±",
            tipTitleCar: "ğŸš— ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼ & é§è»Šã®ã‚³ãƒ„", tipTitlePub: "ğŸšŒ å…¬å…±äº¤é€šã®ã‚³ãƒ„",
            tipsCar: ["13:30ä»¥é™å—å–ã§48Hæ–™é‡‘é©ç”¨ï¼", "è¦³å…‰åœ°ã®é§è»Šã¯ã»ã¼ç„¡æ–™ï¼"],
            tipsPub: ["å¸‚å†…ä¸­å¿ƒéƒ¨ã®è²·ã„ç‰©ï¼†ã‚°ãƒ«ãƒ¡ã«æœ€é©", "æ±äº¬ã§æ¡œã‚’è¦‹ã‚‹ãªã‚‰2æœˆä¸‹æ—¬ãŒãƒ™ã‚¹ãƒˆï¼"],
            map: "åœ°å›³", parking: "é§è»Šå ´", warn: "è»Šé“ã§ã®æ’®å½±ç¦æ­¢ï¼æ­©é“ã‚’åˆ©ç”¨",
            flower: "æ²³æ´¥æ¡œã®æº€é–‹ã‚·ãƒ¼ã‚ºãƒ³äºˆæƒ³ï¼",
            warn48: "13:30ä»¥é™å—å–æ¨å¥¨ (48Hç¯€ç´„)",
            prev: "å‰æ—¥", next: "ç¿Œæ—¥", top: "ãƒˆãƒƒãƒ—ã¸",
            days: ["2/19 (æœ¨)", "2/20 (é‡‘)", "2/21 (åœŸ)", "2/22 (æ—¥)", "2/23 (æœˆ)"],
            dayTitles: ["é™å²¡åˆ°ç€ (09:10)", "å¯Œå£«å±±ãƒ„ã‚¢ãƒ¼", "æ¨ªæµœè¦³å…‰", "ğŸŒ¸ æ¡œ & ãƒ¬ãƒˆãƒ­æ±äº¬", "å¸°å›½ (17:00)"],
            chkTitleCar: "ğŸš— ãƒ‰ãƒ©ã‚¤ãƒ–æº–å‚™ç‰©", chkTitlePub: "ğŸšŒ å¾’æ­©æ—…è¡Œæº–å‚™ç‰©"
        }
    };

    var TRIP_EVENTS = {
        car: [
            [ // Day 1
                {t:"09:10", title:{ko:"ì‹œì¦ˆì˜¤ì¹´ ê³µí•­ ë„ì°©", ja:"é™å²¡ç©ºæ¸¯åˆ°ç€"}, desc:{ko:"ì…êµ­ ì‹¬ì‚¬ í›„ ì´ë™", ja:"å…¥å›½å¯©æŸ»å¾Œç§»å‹•"}, i:"ğŸ "},
                {t:"10:15", title:{ko:"ê³µí•­ë²„ìŠ¤ íƒ‘ìŠ¹", ja:"ç©ºæ¸¯ãƒã‚¹ä¹—è»Š"}, desc:{ko:"ì‹œì¦ˆì˜¤ì¹´ì—­í–‰ (ì•½ 50ë¶„)", ja:"é™å²¡é§…è¡Œã (ç´„50åˆ†)"}, i:"ğŸšŒ"},
                {t:"11:30", title:{ko:"ì ì‹¬: ì‚¬ì™€ì•¼ì¹´ í•¨ë°”ê·¸", ja:"ãƒ©ãƒ³ãƒ: ã•ã‚ã‚„ã‹ãƒãƒ³ãƒãƒ¼ã‚°"}, desc:{ko:"ì„¸ë…¸ë°”ì  ëŒ€ê¸°í‘œ (ì›¨ì´íŒ… í™œìš©)", ja:"ã‚»ãƒãƒåº—æ•´ç†åˆ¸ (å¾…ã¡æ™‚é–“æ´»ç”¨)"}, i:"ğŸ”", loc:"Sawayaka Shizuoka Cenova"},
                {t:"13:30", title:{ko:"ğŸš— ë ŒíŠ¸ì¹´ ìˆ˜ë ¹ (48H)", ja:"ğŸš— ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼å—å– (48H)"}, desc:{ko:"ì ì‹¬ í›„ ìˆ˜ë ¹í•˜ì—¬ ìš”ê¸ˆ ì ˆì•½!", ja:"ãƒ©ãƒ³ãƒå¾Œå—å–ã§æ–™é‡‘ç¯€ç´„ï¼"}, i:"ğŸš—", warn48:true},
                {t:"14:15", title:{ko:"ğŸ“ ë‹ˆí˜¼ë‹¤ì´ë¼ ìœ ë©” í…Œë¼ìŠ¤", ja:"ğŸ“ æ—¥æœ¬å¹³å¤¢ãƒ†ãƒ©ã‚¹"}, desc:{ko:"í›„ì§€ì‚° ë·° + ê±´ì¶•ë¬¼ ê°ìƒ", ja:"å¯Œå£«å±±ãƒ“ãƒ¥ãƒ¼ + å»ºç¯‰é‘‘è³"}, i:"ğŸ“·", loc:"Nihondaira Yume Terrace", p:"Free"},
                {t:"16:00", title:{ko:"ë¯¸í˜¸ì˜ ì†¡ì›", ja:"ä¸‰ä¿ã®æ¾åŸ"}, desc:{ko:"ë°”ë‹¤+ì†Œë‚˜ë¬´+í›„ì§€ì‚°", ja:"æµ·+æ¾+å¯Œå£«å±±"}, i:"ğŸŒŠ", loc:"Miho no Matsubara", p:"Free"},
                {t:"19:00", title:{ko:"ì•„ì˜¤ë°” ì˜¤ë…ê±°ë¦¬", ja:"é’è‘‰ãŠã§ã‚“è¡—"}, desc:{ko:"ê²€ì€ ì˜¤ë…+ë§¥ì£¼ (ì €ë…)", ja:"é™å²¡ãŠã§ã‚“+ãƒ“ãƒ¼ãƒ«"}, i:"ğŸº", loc:"Aoba Oden Street"}
            ],
            [ // Day 2
                {t:"08:30", title:{ko:"í˜¸í…” ì¶œë°œ", ja:"ãƒ›ãƒ†ãƒ«å‡ºç™º"}, desc:{ko:"ì•„ì¹¨ ë§‘ì€ ê³µê¸° ë§ˆì‹œë©° ì¶œë°œ", ja:"æœã®æ¾„ã‚“ã ç©ºæ°—ã§å‡ºç™º"}, i:"ğŸš—"},
                {t:"09:30", title:{ko:"ğŸ“ í›„ì§€ì‚° ê¿ˆì˜ ëŒ€êµ", ja:"ğŸ“ å¯Œå£«å±±å¤¢ã®å¤§æ©‹"}, desc:{ko:"ìœ¡êµ ìœ„ ì¸ìƒìƒ·", ja:"æ­©é“æ©‹ã§ã®è¨˜å¿µæ’®å½±"}, i:"ğŸ“·", loc:"Fuji Central Park", p:"Free", warn:true},
                {t:"10:30", title:{ko:"ì˜¤ë¶€ì¹˜ì‚¬ì‚¬ë°”", ja:"å¤§æ·µç¬¹å ´"}, desc:{ko:"í›„ì§€ì‚°+ë…¹ì°¨ë°­ ë·°", ja:"å¯Œå£«å±±+èŒ¶ç•‘ã®çµ¶æ™¯"}, i:"ğŸ“·", loc:"Obuchi Sasaba", p:"Free"},
                {t:"12:00", title:{ko:"ì‹œë¼ì´í†  í­í¬ & ì ì‹¬", ja:"ç™½ç³¸ã®æ» & ãƒ©ãƒ³ãƒ"}, desc:{ko:"ì•¼í‚¤ì†Œë°” + í­í¬ ì‚°ì±…", ja:"ç„¼ããã° + æ»ã®æ•£ç­–"}, i:"ğŸ’§", loc:"Shiraito Falls", p:"500Â¥"},
                {t:"14:00", title:{ko:"íƒ€ëˆ„í‚¤í˜¸", ja:"ç”°è²«æ¹–"}, desc:{ko:"í˜¸ìˆ˜ ë“œë¼ì´ë¸Œ & ì‚°ì±…", ja:"æ¹–ç•”ãƒ‰ãƒ©ã‚¤ãƒ– & æ•£ç­–"}, i:"ğŸŒŠ", loc:"Lake Tanuki", p:"Free"},
                {t:"18:00", title:{ko:"ì €ë…: ì¥ì–´ë®ë°¥", ja:"å¤•é£Ÿ: ã†ãªãä¸¼"}, desc:{ko:"ë¯¸ì‹œë§ˆ ëª…ë¬¼ ìš°ë‚˜ê¸°", ja:"ä¸‰å³¶åç‰©ã†ãªã"}, i:"ğŸ±"}
            ],
            [ // Day 3
                {t:"09:30", title:{ko:"ë¯¸ì‹œë§ˆ ì¶œë°œ", ja:"ä¸‰å³¶å‡ºç™º"}, desc:{ko:"í•˜ì½”ë„¤ êµ­ë„ 1í˜¸ì„  ë“œë¼ì´ë¸Œ", ja:"ç®±æ ¹å›½é“1å·ç·šãƒ‰ãƒ©ã‚¤ãƒ–"}, i:"ğŸš—"},
                {t:"10:30", title:{ko:"ğŸŒ‹ ì˜¤ì™€ì¿ ë‹¤ë‹ˆ", ja:"ğŸŒ‹ å¤§æ¶Œè°·"}, desc:{ko:"ê²€ì€ ë‹¬ê±€(ìˆ˜ëª… ì—°ì¥!)", ja:"é»’ãŸã¾ã”(å¯¿å‘½å»¶é•·!)"}, i:"ğŸŒ‹", loc:"Owakudani", p:"530Â¥"},
                {t:"13:00", title:{ko:"ì‹ ìš”ì½”í•˜ë§ˆì—­ ë°˜ë‚©", ja:"æ–°æ¨ªæµœé§…è¿”å´"}, desc:{ko:"13:30 ì „ ë°˜ë‚© (48H ì„¸ì´ë¸Œ)", ja:"13:30å‰è¿”å´ (48Hã‚»ãƒ¼ãƒ–)"}, i:"ğŸš©"},
                {t:"14:00", title:{ko:"ğŸ‡¨ğŸ‡³ ìš”ì½”í•˜ë§ˆ ì°¨ì´ë‚˜íƒ€ìš´", ja:"ğŸ‡¨ğŸ‡³ æ¨ªæµœä¸­è¯è¡—"}, desc:{ko:"ë§Œë‘, íƒ•í›„ë£¨ ë¨¹ë°©", ja:"é¤ƒå­, ã‚¿ãƒ³ãƒ•ãƒ«é£Ÿã¹æ­©ã"}, i:"ğŸ¥Ÿ", loc:"Yokohama Chinatown"},
                {t:"15:30", title:{ko:"ğŸ§± ì•„ì¹´ë Œê°€ ì°½ê³ ", ja:"ğŸ§± èµ¤ãƒ¬ãƒ³ã‚¬å€‰åº«"}, desc:{ko:"ì‡¼í•‘ & ë°”ë‹·ê°€ ì‚°ì±…", ja:"ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚° & æµ·è¾ºæ•£ç­–"}, i:"ğŸ›ï¸", loc:"Yokohama Red Brick Warehouse"},
                {t:"17:00", title:{ko:"ğŸš  ì—ì–´ ìºë¹ˆ", ja:"ğŸš  ã‚¨ã‚¢ã‚­ãƒ£ãƒ“ãƒ³"}, desc:{ko:"ë„ì‹¬ ë¡œí”„ì›¨ì´ ì•¼ê²½", ja:"éƒ½å¸‚ãƒ­ãƒ¼ãƒ—ã‚¦ã‚§ã‚¤å¤œæ™¯"}, i:"ğŸš ", loc:"YOKOHAMA AIR CABIN"}
            ],
            [ // Day 4
                {t:"10:00", title:{ko:"â›©ï¸ ë§ˆì“°ì¹˜ì•¼ë§ˆ ì„±ì²œ", ja:"â›©ï¸ å¾…ä¹³å±±è–å¤©"}, desc:{ko:"ë¬´(Daikon)ê°€ ìƒì§•ì¸ íŒŒì›ŒìŠ¤íŒŸ", ja:"å¤§æ ¹ãŒã‚·ãƒ³ãƒœãƒ«ã®ãƒ‘ãƒ¯ãƒ¼ã‚¹ãƒãƒƒãƒˆ"}, i:"â›©ï¸", loc:"Matsuchiyama Shoden"},
                {t:"11:30", title:{ko:"ğŸŒ¸ êµ¬ë‚˜ì¹´ê°€ì™€ ë²šê½ƒ", ja:"ğŸŒ¸ æ—§ä¸­å·ã®æ²³æ´¥æ¡œ"}, desc:{ko:"ì§„í•œ í•‘í¬ìƒ‰ ì¹´ì™€ì¦ˆ ë²šê½ƒ!", ja:"æ¿ƒã„ãƒ”ãƒ³ã‚¯ã®æ²³æ´¥æ¡œï¼"}, i:"ğŸŒ¸", loc:"Old Nakagawa Riverbed", flower:true},
                {t:"13:30", title:{ko:"ì ì‹¬: ì¹´ë©”ì´ë„/ì•„ì‚¬ì¿ ì‚¬", ja:"ãƒ©ãƒ³ãƒ: äº€æˆ¸/æµ…è‰"}, desc:{ko:"êµì ë˜ëŠ” ëª¬ìì•¼í‚¤", ja:"é¤ƒå­ or ã‚‚ã‚“ã˜ã‚ƒç„¼ã"}, i:"ğŸ¥Ÿ", loc:"Kameido Gyoza"},
                {t:"15:00", title:{ko:"ì¿ ë¼ë§ˆì— ì¹´í˜", ja:"è”µå‰ã‚«ãƒ•ã‚§"}, desc:{ko:"ë„ì¿„ì˜ ë¸Œë£¨í´ë¦°", ja:"æ±äº¬ã®ãƒ–ãƒ«ãƒƒã‚¯ãƒªãƒ³"}, i:"â˜•", loc:"Kuramae Station"},
                {t:"18:00", title:{ko:"ìŠ¤ì¹´ì´íŠ¸ë¦¬ ì•¼ê²½", ja:"ã‚¹ã‚«ã‚¤ãƒ„ãƒªãƒ¼å¤œæ™¯"}, desc:{ko:"ì¼ì • ë§ˆë¬´ë¦¬ ì‡¼í•‘", ja:"æ—¥ç¨‹ã®ç· ã‚ããã‚Š"}, i:"ğŸŒƒ", loc:"Tokyo Skytree"}
            ],
            [ // Day 5
                {t:"10:00", title:{ko:"ì²´í¬ì•„ì›ƒ & ì•„ì ", ja:"ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ & ãƒ–ãƒ©ãƒ³ãƒ"}, desc:{ko:"ë§ˆì§€ë§‰ í¸ì˜ì  í„¸ê¸°", ja:"æœ€å¾Œã®ã‚³ãƒ³ãƒ“ãƒ‹"}, i:"ğŸª"},
                {t:"12:00", title:{ko:"ê³µí•­ìœ¼ë¡œ ì´ë™", ja:"ç©ºæ¸¯ã¸ç§»å‹•"}, desc:{ko:"ë„ì¿„OUT 13:30, ì‹œì¦ˆì˜¤ì¹´OUT 11:30 ì¶œë°œ", ja:"æ±äº¬OUT 13:30, é™å²¡OUT 11:30å‡ºç™º"}, i:"ğŸš†"},
                {t:"15:00", title:{ko:"ê³µí•­ ë„ì°© & ìˆ˜ì†", ja:"ç©ºæ¸¯åˆ°ç€ & æ‰‹ç¶šã"}, desc:{ko:"17:00 ë¹„í–‰ê¸°", ja:"17:00 ãƒ•ãƒ©ã‚¤ãƒˆ"}, i:"âœˆï¸"}
            ]
        ],
        public: []
    };
    
    // Public Events (Simplified Copy Logic)
    var pubEvents = JSON.parse(JSON.stringify(TRIP_EVENTS.car));
    pubEvents[0][2] = {t:"11:30", title:{ko:"ì‹œì¦ˆì˜¤ì¹´ì—­ & ì ì‹¬", ja:"é™å²¡é§… & ãƒ©ãƒ³ãƒ"}, desc:{ko:"ì§ ë§¡ê¸°ê¸° & ë§ˆêµ¬ë¡œë™", ja:"è·ç‰©é ã‘ & ãƒã‚°ãƒ­ä¸¼"}, i:"ğŸ£"};
    pubEvents[0][3] = {t:"13:00", title:{ko:"ì‹œë‚´ ëšœë²…ì´ ê´€ê´‘", ja:"å¸‚å†…è¦³å…‰"}, desc:{ko:"ìŠ¨í‘¸ ì„± ê³µì›", ja:"é§¿åºœåŸå…¬åœ’"}, i:"ğŸš¶"};
    pubEvents[0][4] = {t:"15:00", title:{ko:"ë‚˜ë‚˜ì•¼ ë³¸ì ", ja:"ãªãªã‚„æœ¬åº—"}, desc:{ko:"ì§„í•œ ë§ì°¨ ì ¤ë¼ë˜", ja:"æ¿ƒã„æŠ¹èŒ¶ã‚¸ã‚§ãƒ©ãƒ¼ãƒˆ"}, i:"ğŸ¦", loc:"Nanaya Shizuoka"};
    
    pubEvents[1] = [
        {t:"09:00", title:{ko:"ì‹œì¦ˆì˜¤ì¹´ì—­ â†’ í›„ì§€ë…¸ë¯¸ì•¼", ja:"é™å²¡é§… â†’å¯Œå£«å®®"}, desc:{ko:"JR ì „ì²  ì´ë™", ja:"JRé›»è»Šç§»å‹•"}, i:"ğŸš†"},
        {t:"10:00", title:{ko:"í›„ì§€ì‚° ì„¸ê³„ìœ ì‚°ì„¼í„°", ja:"å¯Œå£«å±±ä¸–ç•Œéºç”£ã‚»ãƒ³ã‚¿ãƒ¼"}, desc:{ko:"ê±´ì¶•ë¬¼ & ë·° ê°ìƒ", ja:"å»ºç¯‰ã¨æ™¯è‰²é‘‘è³"}, i:"ğŸ“·", loc:"Mt. Fuji World Heritage Centre, Shizuoka"},
        {t:"11:30", title:{ko:"ì„¼ê² ëŒ€ì‚¬ & ì•¼í‚¤ì†Œë°”", ja:"æµ…é–“å¤§ç¤¾ & ç„¼ããã°"}, desc:{ko:"ì‹ ì‚¬ ì‚°ì±… & ì ì‹¬", ja:"ç¥ç¤¾æ•£ç­– & ãƒ©ãƒ³ãƒ"}, i:"â›©ï¸", loc:"Fujisan HongÅ« Sengen Taisha"},
        {t:"13:30", title:{ko:"ì‹œë¼ì´í†  í­í¬ (ë²„ìŠ¤)", ja:"ç™½ç³¸ã®æ» (ãƒã‚¹)"}, desc:{ko:"ë²„ìŠ¤ ì‹œê°„ í™•ì¸ í•„ìˆ˜", ja:"ãƒã‚¹æ™‚é–“è¦ç¢ºèª"}, i:"ğŸšŒ", loc:"Shiraito Falls"},
        {t:"16:30", title:{ko:"ë¯¸ì‹œë§ˆë¡œ ì´ë™", ja:"ä¸‰å³¶ã¸ç§»å‹•"}, desc:{ko:"ì „ì²  ì´ë™", ja:"é›»è»Šç§»å‹•"}, i:"ğŸš†"},
        {t:"18:00", title:{ko:"ë¯¸ì‹œë§ˆ ìˆ™ì†Œ ì²´í¬ì¸", ja:"ä¸‰å³¶ãƒ›ãƒ†ãƒ«ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³"}, desc:{ko:"ì—­ ê·¼ì²˜ í˜¸í…”", ja:"é§…è¿‘ãã®ãƒ›ãƒ†ãƒ«"}, i:"ğŸ¨"}
    ];
    pubEvents[2] = [
        {t:"10:00", title:{ko:"ë¯¸ì‹œë§ˆ â†’ ì‹ ìš”ì½”í•˜ë§ˆ", ja:"ä¸‰å³¶ â†’ æ–°æ¨ªæµœ"}, desc:{ko:"ì‹ ì¹¸ì„¼ (ì•½ 30ë¶„)", ja:"æ–°å¹¹ç·š (ç´„30åˆ†)"}, i:"ğŸš„"},
        {t:"11:00", title:{ko:"ë„ì°© & ì§ ë³´ê´€", ja:"åˆ°ç€ & è·ç‰©é ã‘"}, desc:{ko:"ì½”ì¸ë½ì»¤ ì´ìš©", ja:"ã‚³ã‚¤ãƒ³ãƒ­ãƒƒã‚«ãƒ¼åˆ©ç”¨"}, i:"ğŸ›…"},
        {t:"12:00", title:{ko:"ì»µë¼ë©´ ë°•ë¬¼ê´€", ja:"ã‚«ãƒƒãƒ—ãƒŒãƒ¼ãƒ‰ãƒ«ãƒŸãƒ¥ãƒ¼ã‚¸ã‚¢ãƒ "}, desc:{ko:"ë‚˜ë§Œì˜ ì»µë¼ë©´ ë§Œë“¤ê¸°", ja:"ãƒã‚¤ã‚«ãƒƒãƒ—ãƒŒãƒ¼ãƒ‰ãƒ«ä½œã‚Š"}, i:"ğŸœ", loc:"CUPNOODLES MUSEUM YOKOHAMA"},
        TRIP_EVENTS.car[2][3], TRIP_EVENTS.car[2][4], TRIP_EVENTS.car[2][5]
    ];
    TRIP_EVENTS.public = pubEvents;

    // --- ë Œë”ë§ í•¨ìˆ˜ ---
    function render() {
        var txt = LOCALE_DATA[appState.lang];
        
        // 1. í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        document.getElementById('lang-text').innerText = appState.lang === 'ko' ? 'æ—¥æœ¬èª' : 'í•œêµ­ì–´';
        document.getElementById('app-title').innerText = txt.title;
        document.querySelector('.txt-car').innerText = txt.rent;
        document.querySelector('.txt-public').innerText = txt.pub;
        document.querySelector('.txt-sch').innerText = txt.sch;
        document.querySelector('.txt-chk').innerText = txt.chk;
        document.querySelector('.txt-info').innerText = txt.info;

        // 2. ëª¨ë“œ ìŠ¤íƒ€ì¼ (í—¤ë”, ë²„íŠ¼)
        var header = document.getElementById('main-header');
        var btnCar = document.getElementById('btn-car');
        var btnPub = document.getElementById('btn-public');
        var navSch = document.getElementById('nav-btn-sch');
        var navChk = document.getElementById('nav-btn-chk');

        if (appState.mode === 'car') {
            header.className = 'bg-gradient-car';
            btnCar.className = 'toggle-btn active text-car';
            btnPub.className = 'toggle-btn inactive';
            if (appState.tab === 'itinerary') {
                navSch.className = 'nav-btn active-car';
                navChk.className = 'nav-btn';
            } else {
                navSch.className = 'nav-btn';
                navChk.className = 'nav-btn active-car';
            }
        } else {
            header.className = 'bg-gradient-pub';
            btnCar.className = 'toggle-btn inactive';
            btnPub.className = 'toggle-btn active text-pub';
            if (appState.tab === 'itinerary') {
                navSch.className = 'nav-btn active-pub';
                navChk.className = 'nav-btn';
            } else {
                navSch.className = 'nav-btn';
                navChk.className = 'nav-btn active-pub';
            }
        }

        // 3. ì»¨í…ì¸  ì˜ì—­
        var content = document.getElementById('content-area');
        content.innerHTML = ''; // ì´ˆê¸°í™”

        // íŒ ë°•ìŠ¤
        document.getElementById('tip-title').innerText = appState.mode === 'car' ? txt.tipTitleCar : txt.tipTitlePub;
        var tips = appState.mode === 'car' ? txt.tipsCar : txt.tipsPub;
        var tipHtml = '';
        var dotColor = appState.mode === 'car' ? 'text-car' : 'text-pub';
        tips.forEach(function(t) {
            tipHtml += '<li class="tip-item"><span style="font-weight:bold" class="'+dotColor+'">âœ”</span> ' + t + '</li>';
        });
        document.getElementById('tip-list').innerHTML = tipHtml;

        if (appState.tab === 'itinerary') {
            // [ì¼ì • íƒ­]
            
            // Day íƒ­ ë²„íŠ¼
            var daysHtml = '<div class="day-tabs">';
            txt.days.forEach(function(d, i) {
                var isActive = (i + 1) === appState.day;
                var activeClass = appState.mode === 'car' ? 'active-car' : 'active-pub';
                var cls = isActive ? 'day-btn ' + activeClass : 'day-btn inactive';
                daysHtml += '<button onclick="setDay('+(i+1)+')" class="'+cls+'">Day '+(i+1)+'</button>';
            });
            daysHtml += '</div>';

            // ì¹´ë“œ ë‚´ìš©
            var dayEvents = TRIP_EVENTS[appState.mode][appState.day - 1];
            var eventsHtml = '<div class="card">';
            // ì¹´ë“œ í—¤ë”
            eventsHtml += '<div class="card-header"><div>';
            eventsHtml += '<span class="date-text '+ (appState.mode==='car'?'text-car':'text-pub') +'">'+ txt.days[appState.day-1] +'</span>';
            eventsHtml += '<div class="title-text">'+ txt.dayTitles[appState.day-1] +'</div>';
            eventsHtml += '</div></div>';
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤íŠ¸
            eventsHtml += '<div>';
            dayEvents.forEach(function(e) {
                var mapBtn = e.loc ? '<button onclick="openMap(\''+e.loc+'\')" class="btn-map '+(appState.mode==='car'?'btn-map-car':'btn-map-pub')+'">ğŸ“ '+txt.map+'</button>' : '';
                
                // ë±ƒì§€ ìƒì„±
                var badges = '';
                if(e.p) badges += '<span class="badge badge-park">ğŸ…¿ï¸ ' + (e.p==='Free'?txt.parking+': 0Â¥':e.p) + '</span>';
                if(e.warn) badges += '<div class="badge badge-warn">âš ï¸ ' + txt.warn + '</div>';
                if(e.flower) badges += '<div class="badge badge-flower">ğŸŒ¸ ' + txt.flower + '</div>';
                if(e.warn48) badges += '<div class="badge badge-time">â° ' + txt.warn48 + '</div>';

                eventsHtml += '<div class="event-item">';
                eventsHtml += '<div class="icon-box icon-'+ (e.iconName || 'car') +'">'+e.icon+'</div>';
                eventsHtml += '<div class="event-content">';
                eventsHtml += '<div style="display:flex; justify-content:space-between; align-items:center;">';
                eventsHtml += '<span class="time-badge">'+e.t+'</span>' + mapBtn;
                eventsHtml += '</div>';
                eventsHtml += '<div class="event-title">'+ e.title[appState.lang] +'</div>';
                eventsHtml += '<div class="event-desc">'+ e.desc[appState.lang] +'</div>';
                eventsHtml += badges;
                eventsHtml += '</div></div>';
            });
            eventsHtml += '</div>'; // end event list

            // í•˜ë‹¨ ì»¨íŠ¸ë¡¤ (ì´ì „/ë‹¤ìŒ)
            eventsHtml += '<div class="nav-controls">';
            if (appState.day > 1) {
                eventsHtml += '<button onclick="setDay('+(appState.day-1)+')" class="nav-control-btn">â—€ '+txt.prev+'</button>';
            } else { eventsHtml += '<div></div>'; }
            
            eventsHtml += '<button onclick="scrollToTop()" class="nav-control-btn btn-top">â¬† '+txt.top+'</button>';
            
            if (appState.day < 5) {
                eventsHtml += '<button onclick="setDay('+(appState.day+1)+')" class="nav-control-btn">'+txt.next+' â–¶</button>';
            } else { eventsHtml += '<div></div>'; }
            eventsHtml += '</div>'; // end nav controls

            eventsHtml += '</div>'; // end card
            
            content.innerHTML = daysHtml + eventsHtml;

        } else {
            // [ì²´í¬ë¦¬ìŠ¤íŠ¸ íƒ­]
            var chkTitle = appState.mode === 'car' ? txt.chkTitleCar : txt.chkTitlePub;
            var chkList = [
                {id:"c1", ko:"ì—¬ê¶Œ & í•­ê³µê¶Œ", ja:"ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ & èˆªç©ºåˆ¸"},
                {id:"c2", ko:"êµ­ì œìš´ì „ë©´í—ˆì¦ (í•„ìˆ˜)", ja:"å›½éš›é‹è»¢å…è¨±è¨¼ (å¿…é ˆ)", mode:'car'},
                {id:"c3", ko:"í•œêµ­ ë©´í—ˆì¦ (ë ŒíŠ¸ ì‹œ ìš”êµ¬)", ja:"éŸ“å›½ã®å…è¨±è¨¼", mode:'car'},
                {id:"c4", ko:"Suica (ì• í”Œí˜ì´/í˜„ë¬¼)", ja:"Suica (Apple Pay/ç¾ç‰©)"},
                {id:"c5", ko:"110v ë¼ì§€ì½” ì–´ëŒ‘í„°", ja:"110v é›»æºã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼"},
                {id:"c6", ko:"ë³´ì¡°ë°°í„°ë¦¬", ja:"ãƒ¢ãƒã‚¤ãƒ«ãƒãƒƒãƒ†ãƒªãƒ¼"},
                {id:"c7", ko:"ë™ì „ ì§€ê°‘ (í•„ìˆ˜)", ja:"å°éŠ­å…¥ã‚Œ (å¿…é ˆ)"},
                {id:"c8", ko:"ì£¼ì°¨ë¹„ìš© (í˜„ê¸ˆ 1000ì—”ê¶Œ)", ja:"é§è»Šæ–™é‡‘ (ç¾é‡‘)", mode:'car'},
                {id:"c9", ko:"í¸í•œ ìš´ë™í™”", ja:"æ­©ãã‚„ã™ã„é´"},
                {id:"c10", ko:"ë²„ìŠ¤ ì‹œê°„í‘œ ìº¡ì²˜", ja:"ãƒã‚¹æ™‚åˆ»è¡¨ã‚¹ã‚¯ã‚·ãƒ§", mode:'pub'}
            ];

            var listHtml = '<div class="card"><h2 style="font-size:1.25rem; font-weight:800; margin-bottom:1rem; color:#1f2937;">'+chkTitle+'</h2>';
            
            chkList.forEach(function(item) {
                if (item.mode && item.mode !== appState.mode) return; // ëª¨ë“œ í•„í„°ë§
                var isChecked = appState.checks[item.id];
                var boxClass = isChecked ? (appState.mode==='car'?'check-box-car':'check-box-pub') : '';
                
                listHtml += '<div onclick="toggleCheck(\''+item.id+'\')" class="check-item '+(isChecked?'checked':'')+'">';
                listHtml += '<div class="check-box '+boxClass+'">'+(isChecked?'âœ”':'')+'</div>';
                listHtml += '<span>'+ item[appState.lang] +'</span>';
                listHtml += '</div>';
            });
            listHtml += '</div>';
            content.innerHTML = listHtml;
        }
    }

    // --- ì „ì—­ í•¨ìˆ˜ ---
    window.toggleLang = function() { appState.lang = (appState.lang === 'ko' ? 'ja' : 'ko'); render(); };
    window.setMode = function(m) { appState.mode = m; render(); };
    window.setTab = function(t) { appState.tab = t; render(); };
    window.setDay = function(d) { appState.day = d; render(); scrollToTop(); };
    window.openMap = function(q) { window.open('https://www.google.com/maps/search/?api=1&query='+encodeURIComponent(q), '_blank'); };
    window.toggleCheck = function(id) { appState.checks[id] = !appState.checks[id]; render(); };
    window.scrollToTop = function() { document.getElementById('main-scroll').scrollTo({ top: 0, behavior: 'smooth' }); };

    // ì´ˆê¸° ì‹¤í–‰
    render();

</script>
</body>
</html>